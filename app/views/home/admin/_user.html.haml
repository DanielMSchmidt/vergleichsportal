.title
  %h5 Nutzer
.content
  .row
    .five.columns
      %ul
        - @users.each do |user|

          -# generate Table entry
          %li.user{:id => user.id}
            - if user.active
              %span.success.label
                %a{"data-reveal-id" => "user-delete-modal"+user.id.to_s, :style => "color: white; cursor: pointer;"}
                  = user.email
            - else
              %span.alert.label
                %a{"data-reveal-id" => "user-delete-modal"+user.id.to_s, :style => "color: white; cursor: pointer;"}
                  = user.email



            -# generate Modals
            - content_for :modal do
              .reveal-modal.medium{:id => "user-delete-modal"+user.id.to_s}
                %h3
                  Manage User:
                  %small
                    =user.email
                .row

                  -# Delete button
                  .three.columns
                    =link_to 'Delete User', user, :method => :delete, :remote => true, :data => { :confirm => 'Are you sure?' }, :class => "button"
                    .one.columns

                  -# Lock button
                  .three.columns
                    = simple_form_for(user, remote: true) do |f|
                      = f.error_notification
                      -if user.active
                        .form-inputs
                          = f.hidden_field :active, value: false
                        .form-actions
                          = f.button :submit, "Sperren", :class => "button"
                      -else
                        .form-inputs
                          = f.hidden_field :active, value: true
                        .form-actions
                          = f.button :submit, "Freigeben", :class => "button"

                    .one.columns

                  -# Make Admin button
                  .three.columns
                    =link_to_if(user.admin?, "Lösche Admin Rolle", user_change_role_path(user), remote: true, class: "button") do
                      =link_to("Admin Rolle hinzufügen", user_change_role_path(user), remote: true, class: "button")

                %a.close-reveal-modal ×

    -# Status index
    .three.columns.offset-by-two
      %p
        %span.success.label Online
        %br/
        %span.secondary.label Offline
        %br/
        %span.alert.label
          gesperrt
